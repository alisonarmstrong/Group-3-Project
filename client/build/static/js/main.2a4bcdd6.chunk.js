(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{116:function(e,t,n){},183:function(e,t,n){},206:function(e,t,n){},232:function(e,t,n){},233:function(e,t,n){},359:function(e,t){},365:function(e,t,n){},366:function(e,t,n){"use strict";n.r(t);var a,o,r,c,s=n(0),i=n.n(s),l=n(46),d=n.n(l),u=(n(205),n(206),n(142)),j=n(47),h=n(37),b="PHOTOS_FETCHED",p="PHOTOS_UPLOADED",O="DELETE_UPLOADED_PHOTO",m="UPDATE_UPLOADED_PHOTO",x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(h.a)(t.photos);case p:return[].concat(Object(h.a)(t.photos),Object(h.a)(e));case O:return e.filter((function(e){return e.public_id!==t.publicId}));default:return Object(h.a)(e)}},v=n(17),f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:var n=-1,a=e.map((function(e,a){return e.id===t.uploadedPhoto.id?(n=a,Object(v.a)(Object(v.a)({},e),t.uploadedPhoto)):e}));return-1!==n?a:[t.uploadedPhoto].concat(Object(h.a)(e));case O:var o=e.findIndex((function(e){return e.response.body.public_id===t.publicId}));return[].concat(Object(h.a)(e.slice(0,o)),Object(h.a)(e.slice(o+1)));default:return Object(h.a)(e)}},g=n(31),y=n(16),k=n(194),w=n(380),P=n(383),N=n(378),S=n(22),I=n.n(S),C=n(40),_=n(20),T=n(374),D=n(381),U=n(188),E=n(375),F=n(389),L=n(376),q=n(25),M=n(26),$=n(136),J=n.n($),H=new(function(){function e(){Object(q.a)(this,e)}return Object(M.a)(e,[{key:"getProfile",value:function(){return J()(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!!e&&!this.isTokenExpired(e)}},{key:"isTokenExpired",value:function(e){try{return J()(e).exp<Date.now()/1e3}catch(t){return!1}}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.assign("/")}}]),e}()),A=function(e){var t=localStorage.getItem("saved_photos")?JSON.parse(localStorage.getItem("saved_photos")):null;if(!t)return!1;var n=null===t||void 0===t?void 0:t.filter((function(t){return t!==e}));return localStorage.setItem("saved_photos",JSON.stringify(n)),!0},B=n(390),G=n(67),Y=n(382),z=Object(Y.a)(a||(a=Object(G.a)(["\n  mutation loginUser($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),K=Object(Y.a)(o||(o=Object(G.a)(["\nmutation addUser($username: String!, $password: String!, $email: String!) {\n  addUser(username: $username, password: $password, email: $email) {\n    \n    user {\n      _id\n      username\n      email\n      photoCount\n      savedPhoto {\n        authors\n        photoId\n        image\n        link\n        title\n        description\n      }\n    }\n    token\n  }\n}\n"]))),R=Object(Y.a)(r||(r=Object(G.a)(["\n  mutation savePhoto($photoData: PhotoInput!) {\n    savePhoto(photoData: $photoData) {\n      _id\n      username\n      email\n      savedPhoto {\n        photoId\n        authors\n        image\n        description\n        title\n        link\n      }\n    }\n  }\n"]))),V=Object(Y.a)(c||(c=Object(G.a)(["\n  mutation removePhoto($photoId: ID!) {\n    removePhoto(photoId: $photoId) {\n      _id\n      username\n      email\n      savedPhoto {\n        photoId\n        authors\n        image\n        description\n        title\n        link\n      }\n    }\n  }\n"]))),W=n(184),X=n.n(W),Z=(n(116),n(1));var Q,ee=function(){var e=Object(s.useState)([]),t=Object(_.a)(e,2),n=t[0],a=t[1],o=Object(s.useState)(""),r=Object(_.a)(o,2),c=r[0],i=r[1],l=Object(s.useState)("aczCYkM2vBISaUTNddlmnXpXV8_2TYD5fAzxm_23vNM"),d=Object(_.a)(l,2),u=d[0],j=(d[1],Object(s.useState)(localStorage.getItem("saved_photos")?JSON.parse(localStorage.getItem("saved_photos")):[])),b=Object(_.a)(j,2),p=b[0],O=b[1],m=Object(B.a)(R),x=Object(_.a)(m,1)[0];Object(s.useEffect)((function(){return function(){var e;(e=p).length?localStorage.setItem("saved_photos",JSON.stringify(e)):localStorage.removeItem("saved_photos")}}));var f=function(){var e=Object(C.a)(I.a.mark((function e(t){var o,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c){e.next=3;break}return e.abrupt("return",!1);case 3:console.log(c);try{o="https://api.unsplash.com/search/photos?page=1&query="+c+"&client_id="+u,X.a.get(o).then((function(e){console.log(e),a(e.data.results)})),r=n.map((function(e){return{photoId:e.id,authors:e.user.name||["No Photographer to display"],title:e.description,description:e.alt_description||["No description"],image:e.urls.full||""}})),console.log(r),a(r),i("")}catch(s){console.error(s)}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(C.a)(I.a.mark((function e(t){var a,o,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.find((function(e){return e.photoId===t})),H.loggedIn()?H.getToken():null){e.next=4;break}return e.abrupt("return",!1);case 4:return e.prev=4,e.next=7,x({variables:{photoData:Object(v.a)({},a)}});case 7:o=e.sent,r=o.data,console.log("data:",r),console.log(p),O([].concat(Object(h.a)(p),[a.photoId])),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),console.error(e.t0);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsxs)(T.a,{children:[Object(Z.jsx)("h1",{children:"Photo Search"}),Object(Z.jsx)(D.a,{onSubmit:f,children:Object(Z.jsxs)(D.a.Row,{children:[Object(Z.jsx)(U.a,{xs:12,md:8,children:Object(Z.jsx)(D.a.Control,{name:"photo",value:c,onChange:function(e){return i(e.target.value)},type:"text",size:"lg",placeholder:"Search"})}),Object(Z.jsx)(U.a,{xs:12,md:4})]})})]}),Object(Z.jsxs)(T.a,{children:[Object(Z.jsx)("h2",{children:n.length?"Viewing ".concat(n.length," results:"):"Results"}),Object(Z.jsx)(E.a,{children:n.map((function(e){return Object(Z.jsxs)(F.a,{border:"dark",children:[e.urls.full?Object(Z.jsx)(F.a.Img,{src:e.urls.full,alt:"The cover for ".concat(e.id),variant:"top"}):null,Object(Z.jsxs)(F.a.Body,{children:[Object(Z.jsx)(F.a.Title,{children:e.description}),Object(Z.jsxs)("p",{className:"small",children:["Authors: ",e.user.username]}),Object(Z.jsx)(F.a.Text,{children:e.description}),H.loggedIn()&&Object(Z.jsx)(L.a,{disabled:null===p||void 0===p?void 0:p.some((function(t){return t===e.id})),className:"btn-block btn-info",onClick:function(){return g(e.id)},children:(null===p||void 0===p?void 0:p.some((function(t){return t===e.id})))?"This photo has already been saved!":"Save this photo!"})]})]},e.id)}))})]})]})},te=n(386),ne=Object(Y.a)(Q||(Q=Object(G.a)(["\n    {\n        me {\n            _id\n            username\n            email\n            photoCount\n            savedPhotos {\n                photoId\n                authors\n                title\n                description\n                image\n                link\n            }\n        }\n    }\n"]))),ae=n.p+"static/media/img11.071baad8.jpg",oe=n.p+"static/media/img12.5ce08668.jpg",re=n.p+"static/media/img13.7daf8aea.jpg",ce=n.p+"static/media/img14.4ea2c308.jpg",se=n.p+"static/media/img15.28b31e31.jpg",ie=n.p+"static/media/img16.a6461d0d.jpg",le=n.p+"static/media/img17.cbc77a4c.jpg",de=n.p+"static/media/img18.35bca809.jpg",ue=n.p+"static/media/img19.4deb9ca5.jpg";var je=function(){return Object(Z.jsx)("div",{className:"contain",children:Object(Z.jsxs)("div",{className:"picContainer",children:[Object(Z.jsx)("img",{src:ae}),Object(Z.jsx)("img",{src:oe}),Object(Z.jsx)("img",{src:re}),Object(Z.jsx)("img",{src:ce}),Object(Z.jsx)("img",{src:se}),Object(Z.jsx)("img",{src:ie}),Object(Z.jsx)("img",{src:le}),Object(Z.jsx)("img",{src:de}),Object(Z.jsx)("img",{src:ue})]})})},he=(n(232),function(){var e,t=Object(te.a)(ne),n=t.loading,a=t.data,o=Object(B.a)(V),r=Object(_.a)(o,1)[0],c=(null===a||void 0===a?void 0:a.me)||[],s=function(){var e=Object(C.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=H.loggedIn()?H.getToken():null,console.log(t),n){e.next=4;break}return e.abrupt("return",!1);case 4:return e.prev=4,e.next=7,r({variables:{photoId:t}});case 7:A(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return n?Object(Z.jsx)("h2",{children:"LOADING..."}):Object(Z.jsxs)("div",{className:"container",children:[Object(Z.jsx)("div",{className:"header",children:Object(Z.jsxs)("h1",{children:[c.username,"'s saved photos"]})}),Object(Z.jsxs)(T.a,{children:[Object(Z.jsx)(je,{}),Object(Z.jsx)(E.a,{children:null===(e=c.savedPhotos)||void 0===e?void 0:e.map((function(e){return Object(Z.jsxs)(F.a,{border:"dark",children:[e.image?Object(Z.jsx)(F.a.Img,{src:e.image,alt:"The cover for ".concat(e.title),variant:"top"}):null,Object(Z.jsxs)(F.a.Body,{children:[Object(Z.jsx)(F.a.Title,{children:e.title}),Object(Z.jsxs)("p",{className:"small",children:["Authors: ",e.authors]}),Object(Z.jsx)(F.a.Text,{children:e.description}),Object(Z.jsx)(L.a,{className:"btn-block btn-danger",onClick:function(){return s(e.photoId)},children:"Delete this photo!"})]})]},e.photoId)}))})]})]})}),be=n(385),pe=n(384),Oe=n(379),me=n(387),xe=n(73),ve=n(377),fe=function(){var e=Object(s.useState)({username:"",email:"",password:""}),t=Object(_.a)(e,2),n=t[0],a=t[1],o=Object(s.useState)(!1),r=Object(_.a)(o,1)[0],c=Object(s.useState)(!1),i=Object(_.a)(c,2),l=i[0],d=i[1],u=Object(B.a)(K),j=Object(_.a)(u,2),h=j[0],b=j[1].error;Object(s.useEffect)((function(){d(!!b)}),[b]);var p=function(e){var t=e.target,o=t.name,r=t.value;a(Object(v.a)(Object(v.a)({},n),{},Object(xe.a)({},o,r)))},O=function(){var e=Object(C.a)(I.a.mark((function e(t){var o,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.prev=3,e.next=6,h({variables:Object(v.a)({},n)});case 6:o=e.sent,r=o.data,console.log(r),H.login(r.addUser.token),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0);case 15:a({username:"",email:"",password:""});case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsx)(Z.Fragment,{children:Object(Z.jsxs)(D.a,{noValidate:!0,validated:r,onSubmit:O,children:[Object(Z.jsx)(ve.a,{dismissible:!0,onClose:function(){return d(!1)},show:l,variant:"danger",children:"Something went wrong with your signup!"}),Object(Z.jsxs)(D.a.Group,{children:[Object(Z.jsx)(D.a.Label,{htmlFor:"username",children:"username"}),Object(Z.jsx)(D.a.Control,{type:"text",placeholder:"Your username",name:"username",onChange:p,value:n.username,required:!0}),Object(Z.jsx)(D.a.Control.Feedback,{type:"invalid",children:"username is required!"})]}),Object(Z.jsxs)(D.a.Group,{children:[Object(Z.jsx)(D.a.Label,{htmlFor:"email",children:"Email"}),Object(Z.jsx)(D.a.Control,{type:"email",placeholder:"Your email address",name:"email",onChange:p,value:n.email,required:!0}),Object(Z.jsx)(D.a.Control.Feedback,{type:"invalid",children:"Email is required!"})]}),Object(Z.jsxs)(D.a.Group,{children:[Object(Z.jsx)(D.a.Label,{htmlFor:"password",children:"Password"}),Object(Z.jsx)(D.a.Control,{type:"password",placeholder:"Your password",name:"password",onChange:p,value:n.password,required:!0}),Object(Z.jsx)(D.a.Control.Feedback,{type:"invalid",children:"Password is required!"})]}),Object(Z.jsx)(L.a,{disabled:!(n.username&&n.email&&n.password),type:"submit",variant:"success",children:"Submit"})]})})},ge=function(){var e=Object(s.useState)({email:"",password:""}),t=Object(_.a)(e,2),n=t[0],a=t[1],o=Object(s.useState)(!1),r=Object(_.a)(o,1)[0],c=Object(s.useState)(!1),i=Object(_.a)(c,2),l=i[0],d=i[1],u=Object(B.a)(z),j=Object(_.a)(u,2),h=j[0],b=j[1].error;Object(s.useEffect)((function(){d(!!b)}),[b]);var p=function(e){var t=e.target,o=t.name,r=t.value;a(Object(v.a)(Object(v.a)({},n),{},Object(xe.a)({},o,r)))},O=function(){var e=Object(C.a)(I.a.mark((function e(t){var o,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),!1===t.currentTarget.checkValidity()&&(t.preventDefault(),t.stopPropagation()),e.prev=3,e.next=6,h({variables:Object(v.a)({},n)});case 6:o=e.sent,r=o.data,console.log(r),H.login(r.login.token),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0);case 15:a({username:"",email:"",password:""});case 16:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(Z.jsx)(Z.Fragment,{children:Object(Z.jsxs)(D.a,{noValidate:!0,validated:r,onSubmit:O,children:[Object(Z.jsx)(ve.a,{dismissible:!0,onClose:function(){return d(!1)},show:l,variant:"danger",children:"Something went wrong with your login credentials!"}),Object(Z.jsxs)(D.a.Group,{children:[Object(Z.jsx)(D.a.Label,{htmlFor:"email",children:"Email"}),Object(Z.jsx)(D.a.Control,{type:"text",placeholder:"Your email",name:"email",onChange:p,value:n.email,required:!0}),Object(Z.jsx)(D.a.Control.Feedback,{type:"invalid",children:"Email is required!"})]}),Object(Z.jsxs)(D.a.Group,{children:[Object(Z.jsx)(D.a.Label,{htmlFor:"password",children:"Password"}),Object(Z.jsx)(D.a.Control,{type:"password",placeholder:"Your password",name:"password",onChange:p,value:n.password,required:!0}),Object(Z.jsx)(D.a.Control.Feedback,{type:"invalid",children:"Password is required!"})]}),Object(Z.jsx)(L.a,{disabled:!(n.email&&n.password),type:"submit",variant:"success",children:"Submit"})]})})},ye=(n(233),function(){var e=Object(s.useState)(!1),t=Object(_.a)(e,2),n=t[0],a=t[1];return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(be.a,{bg:"dark",variant:"dark",children:Object(Z.jsxs)(T.a,{fluid:!0,children:[Object(Z.jsx)(be.a.Brand,{as:g.b,to:"/",children:"Home"}),Object(Z.jsx)(be.a.Toggle,{"aria-controls":"navbar"}),Object(Z.jsx)(be.a.Collapse,{id:"navbar",children:Object(Z.jsx)(pe.a,{className:"ml-auto",children:H.loggedIn()?Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(pe.a.Link,{as:g.b,to:"/search",children:"Search"}),Object(Z.jsx)(pe.a.Link,{as:g.b,to:"/saved",children:"Favorites"}),Object(Z.jsx)(pe.a.Link,{as:g.b,to:"/profile",children:"Profile"}),Object(Z.jsx)(pe.a.Link,{onClick:H.logout,children:"Logout"})]}):Object(Z.jsx)(pe.a.Link,{onClick:function(){return a(!0)},children:"Login/Sign Up"})})})]})}),Object(Z.jsx)(Oe.a,{size:"lg",show:n,onHide:function(){return a(!1)},"aria-labelledby":"signup-modal",children:Object(Z.jsxs)(me.a.Container,{defaultActiveKey:"login",children:[Object(Z.jsx)(Oe.a.Header,{closeButton:!0,children:Object(Z.jsx)(Oe.a.Title,{id:"signup-modal",children:Object(Z.jsxs)(pe.a,{variant:"pills",children:[Object(Z.jsx)(pe.a.Item,{children:Object(Z.jsx)(pe.a.Link,{eventKey:"login",children:"Login"})}),Object(Z.jsx)(pe.a.Item,{children:Object(Z.jsx)(pe.a.Link,{eventKey:"signup",children:"Sign Up"})})]})})}),Object(Z.jsx)(Oe.a.Body,{children:Object(Z.jsxs)(me.a.Content,{children:[Object(Z.jsx)(me.a.Pane,{eventKey:"login",children:Object(Z.jsx)(ge,{handleModalClose:function(){return a(!1)}})}),Object(Z.jsx)(me.a.Pane,{eventKey:"signup",children:Object(Z.jsx)(fe,{handleModalClose:function(){return a(!1)}})})]})})]})})]})}),ke=n(193),we="proj3",Pe="default",Ne=n(35),Se=n(34),Ie=n(30),Ce=function(e){return{type:p,photos:e}},_e=n(12),Te=function(e,t){try{var n=_e.Util.withSnakeCaseKeys(t);return _e.Cloudinary.new().url(e,n)}catch(a){return console.error(a),null}},De=(n(81),function(e){Object(Ne.a)(n,e);var t=Object(Se.a)(n);function n(e){var a;return Object(q.a)(this,n),(a=t.call(this,e)).state={showMore:!1},a}return Object(M.a)(n,[{key:"render",value:function(){var e=Object(v.a)(Object(v.a)({},this.context),this.props),t=Te(e.publicId,e);return Object(Z.jsxs)("div",{className:"photo",children:[this.props.context&&Object(Z.jsx)("h2",{children:this.props.context.custom.photo}),Object(Z.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:Object(Z.jsx)(Ie.b,{publicId:this.props.publicId,className:"thumbnail inline",width:"150",height:"150",crop:"fit",quality:"80",children:Object(Z.jsx)(Ie.c,{quality:"auto",fetchFormat:"auto"})})}),Object(Z.jsxs)("div",{id:"buttons",children:[Object(Z.jsx)("h3",{children:"Remark"}),Object(Z.jsx)("h3",{children:"Edit"})]})]})}},{key:"showMore",value:function(){this.setState({showMore:!0})}},{key:"showLess",value:function(){this.setState({showMore:!1})}}]),n}(s.Component));De.contextType=Ie.a.contextType;var Ue=De,Ee=function(){var e=Object(te.a)(ne).data,t=(null===e||void 0===e?void 0:e.me)||[];return Object(Z.jsx)(Z.Fragment,{children:Object(Z.jsx)("div",{children:Object(Z.jsxs)("div",{className:"header",children:[Object(Z.jsxs)("h1",{children:[t.username,"'s Gallery"]}),Object(Z.jsx)("div",{id:"userlog"})]})})})},Fe=n.p+"static/media/avatar2.fee3ecd8.png",Le=function(){var e=Object(te.a)(ne).data;null===e||void 0===e||e.me;return Object(Z.jsxs)("div",{id:"bio",children:[Object(Z.jsx)("div",{id:"avatar",children:Object(Z.jsx)("img",{src:Fe,alt:"avatar"})}),Object(Z.jsxs)("div",{id:"text",children:[Object(Z.jsx)("h2",{children:"Bio"}),Object(Z.jsx)("h3",{children:"Nam libero tempore, cum soluta nobis est eligendi optio cumque nihil impedit quo minus id quod maxime placeat facere possimus, omnis voluptas assumenda est, omnis dolor repellendus."})]})]})},qe=function(e){Object(Ne.a)(n,e);var t=Object(Se.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){return Object(Z.jsxs)("div",{children:[" ",Object(Z.jsx)(Ee,{}),Object(Z.jsx)("div",{className:"container",children:Object(Z.jsxs)("div",{className:"photoList",children:[Object(Z.jsx)("div",{id:"Userdashboard",children:Object(Z.jsx)("div",{className:"actions",children:Object(Z.jsx)("button",{className:"upload_link",onClick:this.uploadImageWithCloudinary.bind(this),children:Object(Z.jsx)("h2",{children:"Upload"})})})}),Object(Z.jsxs)("div",{className:"photos",children:[0===this.props.photos.length&&Object(Z.jsx)("p",{children:"No photos were added yet."}),this.props.photos.map((function(e){return Object(Z.jsx)(Ue,{publicId:e.public_id},e.public_id)}))]}),Object(Z.jsx)(Le,{})]})})]})}},{key:"uploadImageWithCloudinary",value:function(){var e,t,n=this,a=Object(v.a)({tags:["myphotoalbum"]},this.context);console.log(a),e=a,t=function(e,t){if(e)console.log(e);else{var a=t.event,o=t.info;"success"===a&&n.props.onPhotosUploaded([o])}},window.cloudinary.openUploadWidget(e,t)}}]),n}(s.Component);qe.contextType=Ie.a.contextType;var Me=Object(j.b)((function(e){return{photos:e.photos}}),{onPhotosUploaded:Ce})(qe),$e=n(190),Je=n(109),He=n.n(Je),Ae=n(195),Be=function(e){Object(Ne.a)(n,e);var t=Object(Se.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props.uploadedPhoto,t=e.response,n=t&&t.body,a=Math.floor(e.progress.percent);return Object(Z.jsxs)("div",{children:[Object(Z.jsx)("h3",{children:e.fileName}),n&&n.delete_token&&Object(Z.jsx)("button",{className:"delete-image",onClick:this.deletePhoto.bind(this),children:"Delete image"}),Object(Z.jsxs)("div",{className:"status",children:[!t&&Object(Z.jsxs)("div",{children:["Uploading... ",a,"%"]}),!t&&Object(Z.jsx)("div",{children:"In progress"}),t&&Object(Z.jsxs)("div",{className:"status-code",children:["Upload completed with status code ",t.status]})]}),Object(Z.jsx)("div",{className:"progress-bar",children:Object(Z.jsx)("div",{className:"progress",role:"progressbar",style:{width:a+"%"}})}),n&&Object(Z.jsx)("div",{className:"info",children:Object(Z.jsx)("table",{children:Object(Z.jsx)("tbody",{children:Object.keys(n).map((function(e){return Object(Z.jsxs)("tr",{children:[Object(Z.jsx)("td",{children:e}),Object(Z.jsx)("td",{children:JSON.stringify(n[e])})]},e)}))})})})]})}},{key:"deletePhoto",value:function(){He.a.post("https://api.cloudinary.com/v1_1/".concat(this.context.cloudName,"/delete_by_token")).set("Content-Type","application/json").set("X-Requested-With","XMLHttpRequest").send({token:this.props.uploadedPhoto.response.body.delete_token}).then(this.onDeletePhoto.bind(this))}},{key:"onDeletePhoto",value:function(){this.props.onDeleteUploadedPhoto(this.props.uploadedPhoto.response.body.public_id)}}]),n}(s.Component);Be.contextType=Ie.a.contextType;var Ge=Object(j.b)((function(e){return e}),{onDeleteUploadedPhoto:function(e){return{type:O,publicId:e}}})(Be),Ye=function(e){Object(Ne.a)(n,e);var t=Object(Se.a)(n);function n(e,a){var o;return Object(q.a)(this,n),(o=t.call(this,e,a)).state={uploadedPhotos:[]},o.photoId=1,o}return Object(M.a)(n,[{key:"render",value:function(){var e=this;return Object(Z.jsxs)("div",{children:[Object(Z.jsxs)(Ae.a,{id:"direct-upload-dropzone",disableClick:!0,multiple:!1,accept:"image/*",style:{position:"relative"},onDrop:this.onPhotoSelected.bind(this),children:[Object(Z.jsxs)("div",{id:"direct_upload",children:[Object(Z.jsx)("h1",{children:"New Photo"}),Object(Z.jsx)("h2",{children:"Direct upload from the browser with React File Upload"}),Object(Z.jsx)("p",{children:"You can also drag and drop an image file into the dashed area."}),Object(Z.jsxs)("form",{children:[Object(Z.jsxs)("div",{className:"form_line",children:[Object(Z.jsx)("label",{path:"title",children:"Title:"}),Object(Z.jsx)("div",{className:"form_controls",children:Object(Z.jsx)("input",{type:"text",ref:function(t){return e.titleEl=t},className:"form-control",placeholder:"Title"})})]}),Object(Z.jsxs)("div",{className:"form_line",children:[Object(Z.jsx)("label",{children:"Image:"}),Object(Z.jsx)("div",{className:"form_controls",children:Object(Z.jsxs)("div",{className:"upload_button_holder",children:[Object(Z.jsx)("label",{className:"upload_button",htmlFor:"fileupload",children:"Upload"}),Object(Z.jsx)("input",{type:"file",id:"fileupload",accept:"image/*",multiple:"multiple",ref:function(t){return e.fileInputEl=t},onChange:function(){return e.onPhotoSelected(e.fileInputEl.files)}})]})})]})]}),Object(Z.jsx)("h2",{children:"Status"})]}),this.props.uploadedPhotos.map((function(e,t){return Object(Z.jsx)(Ge,{uploadedPhoto:e},t)}))]}),Object(Z.jsx)(g.c,{className:"back_link",exact:!0,to:"/photos",children:"Back to list"})]})}},{key:"onPhotoSelected",value:function(e){var t,n=this,a="https://api.cloudinary.com/v1_1/".concat(this.context.cloudName,"/upload"),o=this.titleEl.value,r=Object($e.a)(e);try{var c=function(){var e=t.value,r=n.photoId++,c=e.name;He.a.post(a).field("upload_preset",n.context.uploadPreset).field("file",e).field("multiple",!0).field("tags",o?"myphotoalbum,".concat(o):"myphotoalbum").field("context",o?"photo=".concat(o):"").on("progress",(function(t){return n.onPhotoUploadProgress(r,e.name,t)})).end((function(e,t){n.onPhotoUploaded(r,c,t)}))};for(r.s();!(t=r.n()).done;)c()}catch(s){r.e(s)}finally{r.f()}}},{key:"onPhotoUploadProgress",value:function(e,t,n){this.props.onUpdateUploadedPhoto({id:e,fileName:t,progress:n})}},{key:"onPhotoUploaded",value:function(e,t,n){this.props.onUpdateUploadedPhoto({id:e,fileName:t,response:n}),this.props.onPhotosUploaded([n.body])}}]),n}(s.Component);Ye.contextType=Ie.a.contextType;var ze=Object(j.b)((function(e){return e}),{onUpdateUploadedPhoto:function(e){return{type:m,uploadedPhoto:e}},onPhotosUploaded:Ce})(Ye),Ke=(n(183),function(e){Object(Ne.a)(n,e);var t=Object(Se.a)(n);function n(){return Object(q.a)(this,n),t.apply(this,arguments)}return Object(M.a)(n,[{key:"componentDidMount",value:function(){(function(e){var t={cloudName:e,format:"json",type:"list",version:Math.ceil((new Date).getTime()/1e3)},n=Te("myphotoalbum",t);return fetch(n).then((function(e){return e.text()})).then((function(e){return e?JSON.parse(e).resources:[]}))})(this.props.cloudName).then(this.props.onPhotosFetched)}},{key:"render",value:function(){return Object(Z.jsx)(Ie.a,{cloudName:this.props.cloudName,uploadPreset:this.props.uploadPreset,children:Object(Z.jsx)(g.a,{children:Object(Z.jsxs)(y.d,{className:"router",children:[Object(Z.jsx)(y.b,{exact:!0,path:"/photo",component:Me}),Object(Z.jsx)(y.b,{exact:!0,path:"/photos/new",component:ze}),Object(Z.jsx)(y.a,{from:"/",to:"/photo"})]})})})}}]),n}(s.Component)),Re=Object(j.b)(null,{onPhotosFetched:function(e){return{type:b,photos:e}}})(Ke),Ve=(n(365),n.p,n.p,n.p,n.p+"static/media/street.b2f66f92.jpg"),We=function(){return Object(Z.jsxs)("div",{className:"container",children:[Object(Z.jsxs)("div",{className:"header",children:["Photo Drop!",Object(Z.jsx)("span",{children:"share, comment, inspire"})]}),Object(Z.jsx)("div",{id:"frame",children:Object(Z.jsx)("img",{src:Ve})})]})},Xe=function(){return Object(Z.jsxs)("div",{className:"footer",children:[Object(Z.jsx)("p",{children:"Help make this page better!"}),Object(Z.jsx)("button",{children:Object(Z.jsx)(g.b,{to:"/Payment",children:"Donate Now!"})})]})},Ze=n(192),Qe=n(86),et=function(e){Object(Ne.a)(n,e);var t=Object(Se.a)(n);function n(){var e;Object(q.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleSubmit=function(){var t=Object(C.a)(I.a.mark((function t(n){var a,o,r,c,s,i,l;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),a=e.props,o=a.stripe,r=a.elements,o&&r){t.next=4;break}return t.abrupt("return");case 4:if(null!=(c=r.getElement(Qe.CardElement))){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,o.createPaymentMethod({type:"card",card:c});case 9:s=t.sent,i=s.error,l=s.paymentMethod,i?console.log("[error]",i):console.log("[PaymentMethod]",l);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(M.a)(n,[{key:"render",value:function(){var e=this.props.stripe;return Object(Z.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(Z.jsx)(Qe.CardElement,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}}),Object(Z.jsx)("button",{type:"submit",disabled:!e,children:"Pay"})]})}}]),n}(i.a.Component),tt=function(){return Object(Z.jsx)(Qe.ElementsConsumer,{children:function(e){var t=e.elements,n=e.stripe;return Object(Z.jsx)(et,{elements:t,stripe:n})}})},nt=Object(Ze.a)("pk_test_51JGER2DX5T2VcWxZlaxbjVHhFvlC9PqhbMTPBzIJ1bIMM1SAbGP3776GHa7FuJMpNO7r1NRK0yjtX6KgJ5Yvx7Jj00bxolZjQd"),at=function(){return Object(Z.jsx)(Qe.Elements,{stripe:nt,children:Object(Z.jsx)(tt,{})})},ot=we,rt=Pe,ct=Object(k.a)({uri:"/graphql"}),st=Object(ke.a)((function(e,t){var n=t.headers,a=localStorage.getItem("id_token");return{headers:Object(v.a)(Object(v.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})),it=new w.a({link:st.concat(ct),cache:new P.a});console.log(it);var lt=function(){return Object(Z.jsx)(N.a,{client:it,children:Object(Z.jsx)(g.a,{children:Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(ye,{}),Object(Z.jsxs)(y.d,{children:[Object(Z.jsx)(y.b,{exact:!0,path:"/",component:We}),Object(Z.jsx)(y.b,{exact:!0,path:"/search",component:ee}),Object(Z.jsx)(y.b,{exact:!0,path:"/saved",component:he}),Object(Z.jsxs)(y.b,{exact:!0,path:"/profile",children:[" ",Object(Z.jsx)(Re,{cloudName:ot,uploadPreset:rt})]}),Object(Z.jsx)(y.b,{render:function(){return Object(Z.jsx)("h1",{className:"display-2",children:"Wrong page!"})}})]}),Object(Z.jsx)(Xe,{}),Object(Z.jsx)(y.d,{children:Object(Z.jsx)(y.b,{exact:!0,path:"/Payment",component:at})})]})})})},dt=Object(u.a)({photos:x,uploadedPhotos:f}),ut=Object(u.b)(dt);d.a.render(Object(Z.jsx)(j.a,{store:ut,children:Object(Z.jsx)(lt,{})}),document.getElementById("root"))},81:function(e,t,n){}},[[366,1,2]]]);
//# sourceMappingURL=main.2a4bcdd6.chunk.js.map